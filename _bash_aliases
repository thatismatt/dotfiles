#!/bin/bash

path_add() {
    if [ -d "$1" ] && [[ ! $PATH =~ (^|:)$1(:|$) ]];
    then
        PATH+=:$1
    fi
}

path_add /home/matt/bin
path_add /home/matt/opt/sbt
path_add /home/matt/opt/idea/latest/bin
path_add /home/matt/opt/node/latest/bin
path_add /home/matt/opt/jmeter/latest/bin

function bash-reload () {
    . ~/.bash_aliases
}

TODO_FILE=~/notes/todo.org

function todo () {
    if [[ -z "$1" ]]
    then
        cat $TODO_FILE | grep --color=never "\* TODO"
    elif [[ "$1" == "-f" ]]
    then
        echo $TODO_FILE
    elif [[ "$1" == "-e" ]]
    then
        e $TODO_FILE
    elif [[ "$1" == "-?" ]]
    then
        echo "Usage: todo [TASK] [-f] [-e] [-?]"
        echo "Displays the tasks in the todo file, or"
        echo "Add TASK to the todo file."
        echo "  -f  Print the name of the todo file"
        echo "  -e  Edit the todo file (in Emacs)"
        echo "  -?  Print this help text"
    else
        echo "* TODO $@" >> $TODO_FILE
    fi
}

# rm alternative
function mvt () {
    for f in "$@"; do
        if [[ -f $f ]] || [[ -d $f ]]
        then
            mv $f ~/tmp/`date +%Y%m%d-%H%M%S`-`basename $f`
        else
            echo "mvt: $f is not a file or directory."
        fi
    done
}

alias timestamp="date +%Y%m%d-%H%M%S"

alias l='ls -1'
alias la="ls -la"

alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ......="cd ../../../../.."

alias cdi='~/bin/cdi/cdi.py /tmp/cdi.out && cd `cat /tmp/cdi.out`'

alias agi="sudo apt-get install"
alias acs="apt-cache show"
alias acr="apt-cache search"

alias json="python -mjson.tool"

# Emacs - Server Socket (for multiple daemons)
# NOTES: - default = server
#        - see /tmp/emacs1000/ (emacs variable server-socket-dir)
alias emacs-daemon="emacs --daemon=${EMACS_SERVER:-server}"
alias e-d="emacs --daemon=${EMACS_SERVER:-server}"
alias emacs-kill="emacsclient -s ${EMACS_SERVER:-server} -eval \"(kill-emacs)\""
alias e-k="emacsclient -s ${EMACS_SERVER:-server} -eval \"(kill-emacs)\""
alias e='emacsclient -s ${EMACS_SERVER:-server} -n'
